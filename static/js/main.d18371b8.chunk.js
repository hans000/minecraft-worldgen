(this["webpackJsonpform-test"]=this["webpackJsonpform-test"]||[]).push([[0],{163:function(t,e,n){t.exports=n(286)},216:function(t,e,n){},263:function(t,e,n){},284:function(t,e,n){},285:function(t,e,n){},286:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(21),l=n.n(i),c=(n(168),n(160)),o=(n(118),n(98)),s=(n(171),n(158)),u=(n(173),n(99)),p=n(33),m=n(19),d=(n(119),n(48)),b=(n(102),n(44)),h=(n(177),n(150)),y=(n(179),n(116)),f=(n(181),n(159)),v=(n(185),n(100)),g=(n(122),n(97)),E=(n(103),n(55)),k=n(52),N=(n(287),n(56)),O=(n(123),n(18)),j=(n(121),n(53)),x=n(151),A=n.n(x),J=n(66),S=n(60);function I(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length,n=new Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return n.forEach((function(e){for(var n in e)if(e.hasOwnProperty(n)){var a=e[n];t[n]="object"!==typeof a||Array.isArray(a)?a:I(t[n],a)}})),t}function C(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=null==e||""===e?"s":e,a=t.length,r=new RegExp(n);r.test(t.charAt(--a)););return t.substr(0,a+1)}var w=function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(Object(J.a)(this,t),this.value=[],this.nbtStore=void 0,this.tpl="",this.tpl=e,this.nbtStore=n;a--;)this.add()}return Object(S.a)(t,[{key:"get",value:function(t){return this.value[t]}},{key:"add",value:function(){this.value.push(new T(this.tpl,this.nbtStore))}},{key:"remove",value:function(t){this.value.splice(t,1)}},{key:"clear",value:function(){this.value=[]}},{key:"toString",value:function(){var t=this.value.reduce((function(t,e){return t+=e.toString()+","}),"");return"[".concat(C(t,","),"]")}},{key:"toJson",value:function(){return{tpl:this.tpl,value:this.value.map((function(t){return t.toJson()}))}}},{key:"toPureJson",value:function(){return this.value.map((function(t){return t.toPureJson()}))}},{key:"toTree",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.value.map((function(e,n){var a=[].concat(Object(k.a)(t),[n+""]);return{title:"".concat(t[t.length-1],"-").concat(n),key:a,children:e.toTree(a)}}))}}]),t}(),B={bool:"b",byte:"b",short:"s",long:"l",float:"f",double:"d",int:"",string:"",enum:""},T=function(){function t(e,n){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Object(J.a)(this,t),this.nbt={},this.tpl="",this.dynamic=void 0,this.nbtStore=void 0,this.has=[],this.actIndex=-1,this.tpl=e,this.nbtStore=n,this.dynamic=a,this.initActIndex(),this.initItems(this,e)}return Object(S.a)(t,null,[{key:"getItem",value:function(t,e){var n;if(t)return e.length?(e.reduce((function(t,e){var a=t.nbt;if(Array.isArray(e)){var r=Object(p.a)(e,2),i=r[0],l=r[1],c=a[i].get(l);return n=c,c}var o=a[e];return n=o,o}),t),n):t}},{key:"isSimpleType",value:function(t){return["byte","int","number","bool","short","double","long","float","string","enum"].includes(t)}}]),Object(S.a)(t,[{key:"initActIndex",value:function(){var t=this.nbtStore.getComponentByName(this.tpl).nbt;Array.isArray(t)&&(this.actIndex=0,this.initItems(this,t[0]))}},{key:"getTpl",value:function(){return this.tpl}},{key:"setTpl",value:function(t){this.tpl=t,this.clear(),this.initItems(this,t)}},{key:"setIndex",value:function(t){this.actIndex=t,this.clear();var e=this.nbtStore.getComponentByName(this.tpl).nbt;this.initItems(this,e[t])}},{key:"getNbt",value:function(t){return this.nbt[t]}},{key:"setNbt",value:function(t,e,n){void 0===n?this.nbt[t].value=e:this.nbt[t].value[n]=e}},{key:"addAttr",value:function(e,n){if(!this.has.includes(e)){if(t.isSimpleType(n.type))this.nbt[e]={value:n.default,type:n.type};else if("list"===n.type)"string"===typeof n.subtype&&(t.isSimpleType(n.subtype)?this.nbt[e]={value:Array.from({length:n.minItems}).fill(""),type:"list",subtype:n.subtype}:this.nbt[e]=new w(n.subtype,this.nbtStore,n.minItems));else{var a=Array.isArray(n.subtype)?n.subtype[0]:n.subtype,r=new t(a,this.nbtStore,!!a);this.initItems(r,a),this.nbt[e]=r}this.has.push(e)}}},{key:"initItems",value:function(t,e){var n=this.nbtStore.getComponentByName(e).has;n&&(Array.isArray(n)?n.forEach((function(e){return t.add(e)})):t.add())}},{key:"add",value:function(t){var e=this,n=this.nbtStore.getNbtObjectByName(this.tpl,this.actIndex);if(t){var a=n[t].link;(null===a||void 0===a?void 0:a.length)?this.triggerHandle(n,a,(function(t,n){return e.addAttr(t,n)})):this.addAttr(t,n[t])}else Object.keys(n).map((function(t){return e.addAttr(t,n[t])}))}},{key:"remove",value:function(t){var e=this,n=this.nbtStore.getNbtObjectByName(this.tpl,this.actIndex),a=n[t].link;(null===a||void 0===a?void 0:a.length)?this.triggerHandle(n,a,(function(t){return e.removeHandle(t)})):this.removeHandle(t)}},{key:"removeHandle",value:function(t){delete this.nbt[t],this.has.splice(this.has.indexOf(t),1)}},{key:"triggerHandle",value:function(t,e,n){Object.keys(t).forEach((function(a){e.includes(t[a].linkType)&&n(a,t[a])}))}},{key:"clear",value:function(){this.has=[],this.nbt={}}},{key:"toString",value:function(){var e=this,n=Object.keys(this.nbt).reduce((function(n,a){var r=e.nbt[a];return r instanceof w||r instanceof t?n+="".concat(a,":").concat(r.toString(),","):"list"===r.type?"string"===r.subtype?n+="".concat(a,':["').concat(r.value.join('","'),'"],'):n+="".concat(a,":[").concat(r.value.map((function(t){return(t||0)+B[r.subtype]})).join(","),"],"):"bool"===r.type?n+="".concat(a,":").concat(+r.value,"b,"):"string"===r.type?n+="".concat(a,":").concat(r.value?r.value:'""',","):"enum"===r.type?n+="".concat(a,':"').concat(void 0===r.value?"":r.value,'",'):n+="".concat(a,":").concat(""===r.value?0:r.value).concat(B[r.type],","),n}),"");return"{".concat(C(n,","),"}")}},{key:"toJson",value:function(){var e=this;return{tpl:this.tpl,has:Object(k.a)(this.has),index:this.actIndex,dynamic:this.dynamic,nbt:Object.keys(this.nbt).reduce((function(n,a){var r=e.nbt[a];return n[a]=r instanceof t||r instanceof w?r.toJson():{value:r.value},r.dynamic&&(n[a].tpl=r.tpl),n}),{})}}},{key:"toPureJson",value:function(){var e=this;return Object.keys(this.nbt).reduce((function(n,a){var r=e.nbt[a];return n[a]=r instanceof t||r instanceof w?r.toPureJson():r.value,n}),{})}},{key:"toTree",value:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object.keys(this.nbt).map((function(a){var r=e.nbt[a],i=[].concat(Object(k.a)(n),[a]);return{title:a,key:i.join("-"),children:r instanceof t||r instanceof w?r.toTree(i):[]}}))}}]),t}(),L={byte:{min:-128,max:127,step:1,precision:0},short:{min:-32768,max:32767,step:1,precision:0},int:{min:-2147483648,max:2147483647,step:1,precision:0},long:{step:1,precision:0},float:{step:1},double:{step:1}},$=n(288),_=n(289),F=n(290),P=n(291),M=n(292);function R(t){var e=Object(a.useContext)(z),n=e.store,i=e.dispatch,l=Object(a.useState)(!0),c=Object(p.a)(l,2),o=c[0],s=c[1],u=Object(a.useState)(!1),m=Object(p.a)(u,2),h=m[0],y=m[1],f=(t.path.length+1)*n.indent;function v(e,n){i({type:"setActNbt",payload:{key:t.label,path:t.path,value:e,index:n}})}function N(e){i({type:"array/remove",payload:{key:t.label,path:t.path,index:e}})}function j(t){t.stopPropagation(),y((function(){return!0}))}function x(t){y((function(){return!1}))}if(t.count){var A=100/t.count+"%";if("string"===t.subtype)return r.a.createElement(d.a,null,r.a.createElement(O.a,{span:24,style:{paddingBottom:8}},r.a.createElement(d.a,null,r.a.createElement(O.a,{onMouseEnter:j,onMouseLeave:x,span:4,style:{textAlign:"right",padding:"4px 16px 16px 0"}},r.a.createElement("span",{title:t.description},t.label)),r.a.createElement(O.a,{span:20},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:f}},r.a.createElement(E.a.Group,{compact:!0},t.value.map((function(t,e){return r.a.createElement(E.a,{key:e,value:t,style:{marginBottom:8,width:A},placeholder:"\u8bf7\u8f93\u5165",onChange:function(t){return v(t.target.value,e)}})}))))))));var J=L[t.subtype];return r.a.createElement(d.a,null,r.a.createElement(O.a,{span:24,style:{paddingBottom:8}},r.a.createElement(d.a,null,r.a.createElement(O.a,{onMouseEnter:j,onMouseLeave:x,span:4,style:{textAlign:"right",padding:"4px 16px 16px 0"}},r.a.createElement("span",{title:t.description},t.label)),r.a.createElement(O.a,{span:20},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:f}},r.a.createElement(E.a.Group,{compact:!0},t.value.map((function(e,n){return r.a.createElement(g.a,Object.assign({style:{marginBottom:8,width:A},key:n},J,{placeholder:"\u8bf7\u8f93\u5165",value:e,onChange:function(e){return a=e,r=n,void i({type:"setActNbt",payload:{key:t.label,path:t.path,value:a,index:r}});var a,r}}))}))))))))}return r.a.createElement(d.a,{className:h?"nbt-list":""},r.a.createElement(O.a,{span:24,style:{paddingBottom:8}},r.a.createElement(d.a,null,r.a.createElement(O.a,{onMouseEnter:j,onMouseLeave:x,span:4,style:{textAlign:"right",padding:"4px 16px 16px 0"}},r.a.createElement("span",null,t.label)),r.a.createElement(O.a,{span:16},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:f>=0?f:0}},r.a.createElement(b.a.Group,null,r.a.createElement(b.a,{type:"ghost",disabled:!!t.count,onClick:function(){return s((function(){return!0})),void i({type:"array/add",payload:{key:t.label,path:t.path}})},title:"\u65b0\u589e"},r.a.createElement(_.a,null)),r.a.createElement(b.a,{type:"ghost",disabled:!!t.count,onClick:function(){i({type:"array/clear",payload:{key:t.label,path:t.path}})},title:"\u6e05\u7a7a"},r.a.createElement(F.a,null)),r.a.createElement(b.a,{type:"ghost",onClick:function(){return s((function(t){return!t}))},title:"\u5c55\u5f00/\u6298\u53e0"},o?r.a.createElement(P.a,null):r.a.createElement(M.a,null))))))),o&&t.value?t.value.map((function(e,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(O.a,{span:24},function(e,n){switch(t.subtype){case"byte":case"int":case"short":case"long":case"float":case"double":case"number":case"string":return r.a.createElement(d.a,{style:{paddingBottom:16}},r.a.createElement(O.a,{offset:4,span:14},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:f}},r.a.createElement(E.a,{value:e,placeholder:"\u8bf7\u8f93\u5165",onChange:function(t){return v(t.target.value,n)}}))),r.a.createElement(O.a,{span:4,style:{paddingLeft:32}},t.count?null:r.a.createElement($.a,{style:{paddingRight:16,paddingTop:8,color:"red"},onClick:function(){return N(n)}})));default:return r.a.createElement(V,{btns:[r.a.createElement(b.a,{type:"ghost",key:"remove",onClick:function(){return N(n)}},r.a.createElement($.a,{style:{color:"red"}}))],tpl:t.subtype,description:t.description,label:t.subtype,value:t.value[n],path:[].concat(Object(k.a)(t.path),[[t.label,n]])})}}(e,n)))})):null)}var H=n(293),G=n(87),D=n.n(G);n(216);function V(t){var e=Object(a.useContext)(z),n=e.store,i=e.dispatch,l=Object(a.useState)([]),c=Object(p.a)(l,2),s=c[0],u=c[1],m=Object(a.useState)([]),x=Object(p.a)(m,2),J=x[0],S=x[1],I=Object(a.useState)(!0),C=Object(p.a)(I,2),w=C[0],B=C[1],L=Object(a.useState)(!1),$=Object(p.a)(L,2),_=$[0],F=$[1];Object(a.useEffect)((function(){if(t.tpl){var e=n.$nbtStore.getNbtObjectByName(t.tpl,t.value.index),a=Object.keys(e).map((function(t){return{id:t,name:t}}));u((function(){return a}));var r=n.$nbtStore.getNbtObjectByName(t.tpl);if(Array.isArray(r)){var i=r.map((function(t){return{id:t,name:t}}));S((function(){return i}))}}}),[t.tpl,t.value.index]);var G=(t.path.length+1)*n.indent;function W(e,a,l,c){var s=n.$nbtStore.getNbtObjectByName(e,c)[l];if(!s)return null;var u,p=Array.isArray(s.subtype)?s.subtype.map((function(t){return{id:t,name:t}})):null,m=Array.isArray(s.subtype)?s.subtype[0]:"",d=s.title?s.title:l,b=l;if("enum"===s.type){var h=function(t){return"string"===typeof t?n.$map[t]:t}(s.enum);return r.a.createElement(r.a.Fragment,{key:l},r.a.createElement(O.a,{style:{textAlign:"end",padding:"4px 16px 16px 0"},span:4},r.a.createElement(j.a,{title:s.description},r.a.createElement("span",null,d))),r.a.createElement(O.a,{span:20,style:{paddingBottom:16}},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:G}},r.a.createElement(N.a,{showSearch:!0,allowClear:!0,notFoundContent:"\u6682\u65e0\u5185\u5bb9",placeholder:"\u8bf7\u9009\u62e9",style:{width:"100%"},value:a[l].value,onChange:function(e){return function(e,n){i({type:"setActNbt",payload:{key:n,path:t.path,value:e}})}(e,l)}},"string"===typeof h[0]?h.map((function(t){return r.a.createElement(N.a.Option,{key:t,value:t},t)})):h.map((function(t){return r.a.createElement(N.a.Option,{key:t.id,value:t.id},t.id,"\uff08",t.name,"\uff09")}))))))}if("object"===s.type){var y=a[l];return r.a.createElement(r.a.Fragment,{key:l},r.a.createElement(O.a,{span:24},r.a.createElement(V,{description:s.description,value:y,componentOptions:p,componentValue:m,label:d,tpl:y.tpl?y.tpl:b,path:[].concat(Object(k.a)(t.path),[l])})))}if("string"===s.type)return r.a.createElement(r.a.Fragment,{key:l},r.a.createElement(O.a,{style:{textAlign:"end",padding:"4px 16px 16px 0"},span:4},r.a.createElement(j.a,{title:s.description},r.a.createElement("span",null,d))),r.a.createElement(O.a,{span:20,style:{paddingBottom:16}},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:G}},r.a.createElement(E.a,{style:{width:"100%"},disabled:s.disabled,value:a[l].value,onChange:function(e){return function(e,n){i({type:"setActNbt",payload:{key:n,path:t.path,value:e}})}(e.target.value,l)},placeholder:"\u8bf7\u8f93\u5165"}))));if("list"===s.type){var f=(u=s.subtype,["byte","int","bool","number","short","double","long","float","string","enum"].includes(u),a[l].value);return s.minItems&&f.length!==s.minItems&&(f=Array.from({length:s.minItems},(function(){return""}))),r.a.createElement(r.a.Fragment,{key:l},r.a.createElement(O.a,{span:24},r.a.createElement(R,{description:s.description,count:s.minItems,value:f,subtype:Array.isArray(s.subtype)?s.subtype[0]:s.subtype,label:d,path:t.path})))}return"bool"===s.type?r.a.createElement(r.a.Fragment,{key:l},r.a.createElement(O.a,{style:{textAlign:"end",padding:"4px 16px 16px 0"},span:4},r.a.createElement(j.a,{title:s.description},r.a.createElement("span",null,d))),r.a.createElement(O.a,{span:20,style:{paddingBottom:16}},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:G}},r.a.createElement(o.a,{checked:a[l].value,onChange:function(e){return function(e,n){i({type:"setActNbt",payload:{key:n,path:t.path,value:e}})}(e,l)}})))):r.a.createElement(r.a.Fragment,{key:l},r.a.createElement(O.a,{style:{textAlign:"end",padding:"4px 16px 16px 0"},span:4},r.a.createElement(j.a,{title:s.description},r.a.createElement("span",null,d))),r.a.createElement(O.a,{span:20,style:{paddingBottom:16}},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:G}},r.a.createElement(g.a,{style:{width:"100%"},disabled:s.disabled,value:a[l].value,onChange:function(e){return function(e,n){i({type:"setActNbt",payload:{key:n,path:t.path,value:e}})}(e,l)},placeholder:"\u8bf7\u8f93\u5165"}))))}function q(e){i({type:"updateTpl",payload:{path:t.path,tpl:e.target.value}})}var K=[_?"".concat("nbt-compound","--highlight ").concat("nbt-compound"):"nbt-compound",t.className];return r.a.createElement(d.a,{className:K.join(" ")},r.a.createElement(O.a,{span:24},r.a.createElement(d.a,null,r.a.createElement(O.a,{onMouseEnter:function(t){t.stopPropagation(),F((function(){return!0}))},onMouseLeave:function(t){F((function(){return!1}))},span:4,style:{textAlign:"right",padding:"4px 16px 16px 0"}},r.a.createElement(j.a,{title:t.description},r.a.createElement("span",null,t.label))),r.a.createElement(O.a,{span:14,style:{paddingBottom:16}},r.a.createElement("div",{className:"nbt-item",style:{marginLeft:G-24>=0?G-24:0}},r.a.createElement(E.a.Group,{compact:!0},!!J.length&&r.a.createElement(N.a,{allowClear:!0,placeholder:"\u8bf7\u9009\u62e9",notFoundContent:"\u6682\u65e0\u5185\u5bb9",value:J[t.value.index].id,onChange:function(e){var n=J.findIndex((function(t){return t.id===e}));i({type:"updateIndex",payload:{path:t.path,index:n}})},style:{width:"40%"}},J.map((function(t){return r.a.createElement(N.a.Option,{key:t.id,value:t.id},t.name)}))),r.a.createElement(N.a,{allowClear:!0,mode:"multiple",maxTagCount:0,placeholder:"\u8bf7\u9009\u62e9",notFoundContent:"\u6682\u65e0\u5185\u5bb9",style:{width:J.length?"60%":"100%"},onChange:function(e){e.length||i({type:"clear",payload:{path:t.path}})},value:t.value.has,onDeselect:function(e){i({type:"remove",payload:{path:t.path,key:e}})},dropdownRender:function(e){return r.a.createElement("div",null,t.componentOptions?r.a.createElement("div",{style:{padding:"0 8px"}},r.a.createElement(f.a.Text,{style:{paddingRight:16},type:"secondary"},"\u9009\u9879"),r.a.createElement(y.a.Group,{onChange:q,defaultValue:t.componentValue},t.componentOptions.map((function(t){return r.a.createElement(y.a,{key:t.id,value:t.id},t.name)}))),r.a.createElement(h.a,{style:{margin:"4px 0"}})):null,e)},maxTagPlaceholder:function(t){return"\u5df2\u9009".concat(t.length,"\u9879\uff08").concat(s.length,"\uff09")},onSelect:function(e){B((function(){return!0})),i({type:"add",payload:{path:t.path,key:e}})}},s.map((function(t){return r.a.createElement(N.a.Option,{key:t.id,value:t.id},t.name)})))))),r.a.createElement(O.a,{span:6},r.a.createElement(A.a,{style:{marginLeft:16}},r.a.createElement(b.a,{type:"ghost",onClick:function(){return B((function(t){return!t}))},title:"\u5c55\u5f00/\u6298\u53e0"},w?r.a.createElement(P.a,null):r.a.createElement(M.a,null)),r.a.createElement(b.a,{type:"ghost",onClick:function(){var e=T.getItem(n.actNbt,t.path);console.log(e.toTree());var a=JSON.stringify(e.toPureJson(),null,2);D()(a),v.b.success("\u5df2\u590d\u5236\u5230\u526a\u8d34\u677f")},title:"\u751f\u6210"},r.a.createElement(H.a,null)),t.btns)))),w?function(t){if(t){var e=t.tpl,n=t.nbt;return n?Object.keys(n).map((function(a){return W(e,n,a,t.index)})):[]}return[]}(t.value):null)}var W=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(J.a)(this,t),this.store={},this.store=e,this.merge(e)}return Object(S.a)(t,[{key:"initEnum",value:function(){var t=this;Object.keys(this.store).forEach((function(e){var n=t.store[e];if(n.key){var a=n.nbt;Object.keys(a).forEach((function(t){var e=/^\$\{(.+)\}$/.exec(t)||[],r=Object(p.a)(e,2)[1];if(r){var i=a[t];n.key[r].reduce((function(t,e){return t["".concat(e,"_").concat(r)]=i,t}),a),delete a[t]}}))}}))}},{key:"merge",value:function(t){var e=this;I(this.store,t),Object.keys(t).reduce((function(t,n){return t[n]=e.build(n),t}),this.store),this.initEnum()}},{key:"build",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(a.includes(t))return{};var r=this.store[t];return r?(a.push(t),r.base&&r.base.forEach((function(t){return I(n,e.build(t,n,a))})),I(n,r),n):{}}},{key:"getRootNodes",value:function(){var t=this;return Object.keys(this.store).filter((function(e){return t.store[e].root}))}},{key:"getNbtObjectByName",value:function(t,e){var n,a,r=null===(n=this.store[t])||void 0===n?void 0:n.nbt;return Number.isInteger(e)&&Array.isArray(r)?null===(a=this.store[r[~e?e:0]])||void 0===a?void 0:a.nbt:r}},{key:"getComponentByName",value:function(t){return this.store[t]}},{key:"getStore",value:function(){return this.store}}]),t}(),q=(n(263),{actNbt:null,nbtJson:{},$nbtStore:new W,$map:{},indent:0}),z=r.a.createContext(null);function K(t,e){var n=e.type,a=e.payload;if("initData"===n){var r=a.$nbtStore,i=a.$map;return t.$nbtStore.merge(r),Object(m.a)(Object(m.a)({},t),{},{$map:i})}if("addNbt"===n){var l=new T(a,t.$nbtStore);return Object(m.a)(Object(m.a)({},t),{},{actNbt:l,nbtJson:l.toJson()})}if("updateNbtJson"===n)return Object(m.a)(Object(m.a)({},t),{},{nbtJson:t.actNbt.toJson()});if("setActNbt"===n){var c=a.path,o=a.key,s=a.value,u=a.index;return T.getItem(t.actNbt,c).setNbt(o,s,u),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("add"===n){var p=a.path,d=a.key;return T.getItem(t.actNbt,p).add(d),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("remove"===n){var b=a.path,h=a.key;return T.getItem(t.actNbt,b).remove(h),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("clear"===n){var y=a.path;return T.getItem(t.actNbt,y).clear(),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("updateTpl"===n){var f=a.tpl,v=a.path;return T.getItem(t.actNbt,v).setTpl(f),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("updateIndex"===n){var g=a.index,E=a.path;return T.getItem(t.actNbt,E).setIndex(g),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("array/clear"===n){var k=a.path,N=a.key,O=T.getItem(t.actNbt,k),j=O.getNbt(N);return j instanceof w?j.clear():O.setNbt(N,[],void 0),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("array/remove"===n){var x=a.path,A=a.index,J=a.key;return T.getItem(t.actNbt,x).getNbt(J).value.splice(A,1),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("array/add"===n){var S=a.path,I=a.key,C=T.getItem(t.actNbt,S).getNbt(I);return C instanceof w?C.add():C.value.push(""),Object(m.a)(Object(m.a)({},t),{},{actNbt:t.actNbt,nbtJson:t.actNbt.toJson()})}if("setIndent"===n){var B=a;return Object(m.a)(Object(m.a)({},t),{},{indent:B})}return t}var Q=function(){var t=Object(a.useReducer)(K,q),e=Object(p.a)(t,2),n=e[0],i=e[1],l=Object(a.useState)([]),m=Object(p.a)(l,2),d=m[0],b=m[1],h=Object(a.useState)([]),y=Object(p.a)(h,2),f=y[0],v=y[1];function g(t){i({type:"addNbt",payload:t})}return Object(a.useEffect)((function(){fetch("./world.json").then((function(t){return t.json()})).then((function(t){i({type:"initData",payload:{$nbtStore:t,$map:{}}}),v((function(){var t=n.$nbtStore.getRootNodes();return g(t[0]),t}))})),u.a.success({duration:null,message:"CBer\u73a9\u5bb6",description:"\u6b22\u8fce\u4f7f\u7528worldgen\uff0c\u8f6f\u4ef6\u5904\u4e8e\u6d4b\u8bd5\u72b6\u6001"})}),[]),Object(a.useEffect)((function(){n.actNbt&&b((function(){return n.actNbt.toTree()}))}),[n.nbtJson]),r.a.createElement("div",{className:"gen"},r.a.createElement(z.Provider,{value:{store:n,dispatch:i}},r.a.createElement("div",{className:"gen__left",style:{paddingTop:24}},r.a.createElement(s.a,{onClick:function(){},defaultExpandAll:!0,treeData:d,showLine:!0})),r.a.createElement("div",{className:"gen__right"},r.a.createElement("div",{className:"gen__wrap"},r.a.createElement("div",{style:{height:40,paddingTop:8}},r.a.createElement(o.a,{checkedChildren:"\u5f00",unCheckedChildren:"\u5173",style:{marginLeft:16,float:"right",textAlign:"right"},onChange:function(){i({type:"setIndent",payload:n.indent?0:24})}}),f.length>1&&f.map((function(t){var e;return r.a.createElement(c.a,{color:(null===(e=n.actNbt)||void 0===e?void 0:e.getTpl())===t?"processing":"default",key:t,onClick:function(){return g(t)}},t)}))),n.actNbt&&r.a.createElement(V,{className:"root",description:"",label:n.nbtJson.tpl,tpl:n.nbtJson.tpl,value:n.nbtJson,path:[]})))))},U=(n(284),function(){return r.a.createElement(Q,null)});n(285);l.a.render(r.a.createElement("div",{className:"main"},r.a.createElement("h1",null,"Worldgen\u6d4b\u8bd5\u7248",r.a.createElement("span",null,"\u5320\u5fc3\u6253\u9020\uff0c\u8ffd\u6c42\u6781\u81f4"),r.a.createElement("div",{className:"right"},r.a.createElement("a",{href:"https://hans000.gitee.io/mc-viewer/",target:"_blank"},"viewer"),r.a.createElement("a",{href:"https://hans000.gitee.io/jtext-studio/",target:"_blank"},"JText Studio"),r.a.createElement("a",{href:"https://gitee.com/hans000/worldgen",target:"_blank"},"\u4f7f\u7528\u6587\u6863"),r.a.createElement("a",{href:"https://gitee.com/hans000/worldgen/issues",target:"_blank"}," \u95ee\u9898\u53cd\u9988"))),r.a.createElement("div",{className:"cont"},r.a.createElement(U,null))),document.getElementById("root"))}},[[163,1,2]]]);
//# sourceMappingURL=main.d18371b8.chunk.js.map